<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Newsletter â€“ sahxiety</title>
  <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700|Georgia:400,700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --color-bg-dark: #000000;
      --color-text-dark: #f5f5f5;
      --accent-color: #8a2be2;
      --accent-color-hover: #6a1fb3;
    }
    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: var(--color-bg-dark);
      color: var(--color-text-dark);
      font-family: 'Georgia', serif;
      font-size: 1.15em;
      line-height: 1.8;
    }
    .fade-header {
      width: 100%;
      background: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(5px);
      transition: all 0.3s ease;
      opacity: 1;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 5px 0 0 0;
      text-align: center;
      transform: translateY(0);
      height: auto;
      max-height: 150px;
      overflow: hidden;
    }
    .fade-header.faded {
      opacity: 0; /* Completely invisible */
      transform: translateY(-100%); /* Move it completely off-screen */
      pointer-events: none;
      max-height: 0; /* Collapse height */
      visibility: hidden; /* Ensure it's completely hidden */
    }
    .site-title {
      font-family: 'Playfair Display', serif;
      font-size: 2.1em;
      font-weight: 700;
      letter-spacing: 1px;
      margin: 0;
      padding: 0;
      color: var(--color-text-dark);
      text-align: center;
      transition: color var(--transition-speed);
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 36px;
      margin: 10px 0 32px 0;
      font-family: 'Playfair Display', serif;
    }
    nav a {
      color: var(--accent-color);
      background: none;
      border: none;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.07em;
      letter-spacing: 0.03em;
      padding: 4px 0;
      border-bottom: 2px solid transparent;
      transition: color 0.2s, border-color 0.2s;
      cursor: pointer;
      font-family: inherit;
    }
    nav a:hover, nav a.active {
      color: var(--accent-color-hover);
      border-bottom: 2px solid var(--accent-color-hover);
    }
    main {
      max-width: 680px;
      margin: 0 auto;
      padding: 100px 16px 48px 16px; /* Reduced top padding */
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: fadeIn 0.5s ease-out; /* Added fade-in animation */
      transition: padding 0.3s ease, margin 0.3s ease; /* Smooth transition for padding/margin changes */
    }
    .newsletter {
      background: rgba(255,255,255,0.07);
      border-radius: 14px;
      padding: 32px 24px 24px 24px;
      margin: 48px 0 0 0;
      text-align: center;
      box-shadow: 0 0 12px rgba(255,255,255,0.08);
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
    }
    .newsletter h3 {
      margin-top: 0;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      color: inherit;
    }
    .newsletter-desc {
      font-size: 1em;
      color: #aaa;
      margin-bottom: 18px;
      text-align: center;
      line-height: 1.6;
    }
    #newsletter-form {
      display: flex;
      flex-direction: column;
      gap: 0;
      align-items: center;
      margin-top: 10px;
    }
    #newsletter-form input[type="text"],
    #newsletter-form input[type="email"] {
      width: 100%;
      max-width: 320px;
      padding: 12px 14px;
      border-radius: 7px;
      border: 1px solid #444;
      font-size: 1em;
      margin-bottom: 10px;
      background: #181818;
      color: #f5f5f5;
      font-family: 'Georgia', serif;
      outline: none;
      transition: border-color 0.2s;
    }
    #newsletter-form input:focus {
      border-color: var(--accent-color);
    }
    #newsletter-form button {
      background: var(--accent-color);
      color: #fff;
      border: none;
      border-radius: 7px;
      padding: 12px 32px;
      font-size: 1.1em;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      letter-spacing: 0.03em;
      cursor: pointer;
      transition: background 0.2s;
    }
    #newsletter-form button:hover {
      background: var(--accent-color-hover);
    }
    #newsletter-message {
      margin-top: 12px;
      font-size: 1em;
    }
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes slideInRight {
      from { transform: translateX(30px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }

    @keyframes blink {
      50% { border-color: transparent }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    @keyframes rotate3D {
      0% { transform: perspective(1000px) rotateY(0deg); }
      100% { transform: perspective(1000px) rotateY(360deg); }
    }

    /* Particle background */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
      overflow: hidden;
    }

    .particle {
      position: absolute;
      width: 6px;
      height: 6px;
      background-color: var(--accent-color);
      border-radius: 50%;
      opacity: 0.3;
      animation: float 15s infinite ease-in-out;
    }

    /* Gradient background for newsletter */
    .newsletter {
      background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(0, 0, 0, 0.2), rgba(138, 43, 226, 0.15));
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite, scaleIn 200ms ease-out forwards;
      border: 1px solid rgba(138, 43, 226, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
    }

    /* Typing animation for heading - much faster */
    .newsletter h3 {
      display: inline-block;
      overflow: hidden;
      white-space: nowrap;
      margin: 0 auto;
      letter-spacing: 0.1em;
      border-right: 3px solid var(--accent-color);
      animation:
        typing 300ms steps(30, end),
        blink 1s step-end infinite;
      animation-fill-mode: forwards;
    }

    .newsletter-desc {
      animation: fadeIn 200ms ease-out both;
      position: relative;
    }

    .newsletter-desc::after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      width: 50px;
      height: 2px;
      background: var(--accent-color);
      transform: translateX(-50%);
      animation: scaleIn 200ms ease-out both;
    }

    #newsletter-form input {
      animation: fadeIn 200ms ease-out both;
      transition: all 0.2s ease;
      border: 1px solid rgba(138, 43, 226, 0.3);
    }

    #newsletter-form input:focus {
      border-color: var(--accent-color);
      box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
      transform: translateY(-5px) scale(1.02);
    }

    #newsletter-form button {
      animation: fadeIn 200ms ease-out both;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    #newsletter-form button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: all 0.5s;
      z-index: -1;
    }

    #newsletter-form button:hover::before {
      left: 100%;
    }

    nav a {
      animation: slideInRight 200ms ease-out forwards;
      animation-delay: calc(50ms * var(--animation-order, 0));
      position: relative;
    }

    nav a::after {
      content: '';
      position: absolute;
      width: 100%;
      transform: scaleX(0);
      height: 2px;
      bottom: -2px;
      left: 0;
      background-color: var(--accent-color);
      transform-origin: bottom right;
      transition: transform 0.3s ease-out;
    }

    nav a:hover::after {
      transform: scaleX(1);
      transform-origin: bottom left;
    }

    /* Enhanced 3D hover effects */
    #newsletter-form button:hover {
      background: var(--accent-color-hover);
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 10px 20px rgba(138, 43, 226, 0.4);
    }

    @media (max-width: 700px) {
      html, body {
        font-size: 1.05em;
      }

      .site-title {
        font-size: 1.6em;
        padding-top: 12px; /* Reduced padding */
        padding-bottom: 5px; /* Added bottom padding */
        text-align: center;
        width: 100%;
      }

      /* Ensure header doesn't overlap content */
      .fade-header {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 10px 0 5px 0; /* Adjusted padding */
      }

      nav {
        gap: 15px; /* Reduced gap */
        font-size: 1.05em;
        flex-wrap: wrap;
        justify-content: center;
        padding: 0 10px;
        margin: 5px 0; /* Adjusted margins */
        width: 100%;
      }

      nav a {
        padding: 6px 8px; /* Added horizontal padding */
        margin: 0; /* Removed margins */
        border-radius: 4px;
        background: rgba(138, 43, 226, 0.05);
      }

      main {
        padding: 100px 16px 36px 16px; /* Adjusted top padding for fixed header */
        width: 100%;
        box-sizing: border-box;
      }

      .newsletter {
        padding: 20px 16px; /* Reduced padding */
        margin-top: 15px; /* Reduced top margin */
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      #newsletter-form {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      #newsletter-form input[type="text"],
      #newsletter-form input[type="email"] {
        width: 100%;
        max-width: 100%;
        padding: 14px 16px;
        font-size: 1.05em;
        margin-bottom: 15px;
        box-sizing: border-box;
      }

      #newsletter-form button {
        padding: 14px 32px;
        font-size: 1.15em;
        width: 100%;
        max-width: 100%;
      }

      .newsletter-desc {
        padding: 0 10px;
        text-align: center;
      }

      h1 {
        text-align: center;
        font-size: 1.5em;
      }

      /* Optimize animations for mobile */
      .newsletter, #newsletter-form input, #newsletter-form button {
        transition: all 0.2s ease; /* Faster transitions */
      }
    }

    /* Small mobile devices */
    @media (max-width: 480px) {
      html, body {
        font-size: 1em;
      }

      main {
        padding-top: 0; /* Start content from the top when header is hidden */
        padding-left: 10px;
        padding-right: 10px;
        margin-top: 80px; /* Add margin to account for header height */
        transition: padding 0.3s ease, margin 0.3s ease; /* Smooth transition */
      }

      .site-title {
        font-size: 1.5em;
        padding: 2px 0 0 0;
        margin: 0;
        text-align: left; /* Align to the left as requested */
        padding-left: 10px; /* Add some padding on the left */
      }

      .fade-header {
        max-height: 90px; /* Increased max height to fit all nav items */
        display: flex;
        flex-direction: column;
        align-items: flex-start; /* Align items to the left */
      }

      nav {
        gap: 8px; /* Increased gap for better spacing */
        margin: 5px 0 5px 0; /* Slightly increased margins */
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: flex-start; /* Align to the left */
        padding: 0 10px; /* Add padding on the sides */
        width: 100%;
        display: flex;
      }

      nav a {
        font-size: 1.1em; /* Increased font size */
        padding: 5px 10px; /* Increased padding for better touch targets */
        margin: 2px; /* Small margin between items */
        border-radius: 4px;
        background: rgba(138, 43, 226, 0.05);
        line-height: 1.2; /* Slightly increased line height */
        display: inline-block; /* Ensure proper display */
      }

      .newsletter h3 {
        font-size: 1.3em;
        white-space: normal; /* Allow wrapping for small screens */
        border-right: none; /* Remove typing cursor on mobile */
        animation: fadeIn 300ms ease-out;
        margin-bottom: 10px; /* Reduced margin */
      }

      .newsletter-desc {
        font-size: 0.95em; /* Reduced font size */
        margin-bottom: 15px; /* Reduced margin */
      }

      #newsletter-form button {
        font-size: 1.1em;
        padding: 12px 24px;
      }

      .newsletter {
        padding: 15px 12px; /* Reduced padding */
        margin-top: 10px; /* Reduced margin */
      }

      #newsletter-form input[type="text"],
      #newsletter-form input[type="email"] {
        padding: 12px 14px;
        font-size: 1em;
        margin-bottom: 10px; /* Reduced margin */
      }

      /* Reduce hover effects on mobile */
      #newsletter-form input:focus, #newsletter-form button:hover {
        transform: translateY(-3px) !important; /* Smaller transform */
      }

      /* Adjust footer for small screens */
      footer {
        padding: 12px 10px; /* Reduced padding */
        font-size: 0.9em;
      }
    }
    footer {
      width: 100%;
      text-align: center;
      color: #aaa;
      font-size: 1em;
      padding: 32px 0 18px 0;
      font-family: 'Georgia', serif;
      letter-spacing: 0.03em;
      margin-top: 40px;
      position: sticky;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      z-index: 5;
    }
  </style>
</head>
<body>
  <!-- Particle background -->
  <div class="particles" id="particles"></div>

  <header id="fade-header" class="fade-header">
    <div class="site-title">sahxiety</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="posts.html">Posts</a>
      <a href="newsletter.html" class="active">Newsletter</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>
  <main>
    <section class="newsletter" id="newsletter" aria-label="Newsletter subscription">
      <h3>Join the Newsletter</h3>
      <div class="newsletter-desc">
        Get personal updates, essays, and more-direct to your inbox.<br>
        <b>No spam. Unsubscribe anytime.</b>
      </div>
      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
      <form id="newsletter-form" action="https://docs.google.com/forms/d/e/1FAIpQLSe14a0S7pXLlULmM7DUqpUQ6kurhkV7lMmHWqzebMKIU31-MQ/formResponse" method="post" target="hidden_iframe" autocomplete="off" onsubmit="submitted=true;">
        <input type="text" id="name" name="entry.1444035834" placeholder="Your name" required>
        <input type="email" id="email" name="entry.1614046507" placeholder="Your email" required>
        <button type="submit">Subscribe</button>
        <div id="newsletter-message"></div>
      </form>
    </section>
  </main>
  <footer>
    Â© 2025 Sahil Yadav. All rights reserved.
  </footer>
  <script>
    // Create particle background
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth < 768 ? 15 : 30;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');

        // Random position
        const posX = Math.random() * 100;
        const posY = Math.random() * 100;
        particle.style.left = `${posX}%`;
        particle.style.top = `${posY}%`;

        // Random size
        const size = Math.random() * 8 + 2;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;

        // Random opacity
        particle.style.opacity = Math.random() * 0.5 + 0.1;

        // Random animation duration and delay
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 5;
        particle.style.animation = `float ${duration}s infinite ease-in-out ${delay}s`;

        particlesContainer.appendChild(particle);
      }
    }

    // Set animation order for nav links
    document.querySelectorAll('nav a').forEach((link, index) => {
      link.style.setProperty('--animation-order', index);
    });

    // Form submission with enhanced animations
    const form = document.getElementById('newsletter-form');
    const messageBox = document.getElementById('newsletter-message');
    const submitButton = form.querySelector('button[type="submit"]');
    const newsletterSection = document.querySelector('.newsletter');
    const inputs = form.querySelectorAll('input:not([type="hidden"])');

    // Add 3D hover effect to button
    submitButton.addEventListener('mouseenter', function() {
      this.style.animation = 'pulse 1s infinite ease-in-out';
      this.style.transform = 'translateY(-5px) scale(1.05)';
      this.style.boxShadow = '0 10px 20px rgba(138, 43, 226, 0.4)';
    });

    submitButton.addEventListener('mouseleave', function() {
      this.style.animation = '';
      this.style.transform = '';
      this.style.boxShadow = '';
    });

    // Variable to track form submission
    var submitted = false;

    // Handle form submission
    form.addEventListener('submit', function() {
      // Show submission animation
      submitButton.style.animation = 'pulse 0.7s infinite ease-in-out';
      submitButton.disabled = true;
      messageBox.textContent = 'Submitting...';
      messageBox.style.color = '#aaa';
      messageBox.style.animation = 'fadeIn 0.3s forwards';

      // Add success animation to the form container
      newsletterSection.style.animation = 'pulse 1s ease-out';

      // Set a timeout to show success message after form submission
      setTimeout(function() {
        // Show success message
        messageBox.textContent = 'Thank you for subscribing!';
        messageBox.style.color = '#00e054';
        messageBox.style.animation = 'fadeIn 0.5s forwards';

        // Reset form
        form.reset();

        // Reset button
        submitButton.style.animation = '';
        submitButton.disabled = false;

        // Reset submission flag
        submitted = false;
      }, 2000);
    });

    // Add focus animations to form inputs with 3D effect
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.style.transition = 'all 0.3s ease';
        this.style.transform = 'translateY(-5px) scale(1.02)';
        this.style.boxShadow = '0 8px 15px rgba(138, 43, 226, 0.3)';
      });

      input.addEventListener('blur', function() {
        this.style.transform = 'translateY(0) scale(1)';
        this.style.boxShadow = 'none';
      });
    });

    // Add scroll reveal animations - faster version
    function revealOnScroll() {
      const elements = document.querySelectorAll('.newsletter, h3, .newsletter-desc, #newsletter-form');

      elements.forEach(element => {
        // Make elements visible immediately
        element.style.visibility = 'visible';
        element.style.opacity = '1';
      });
    }

    // Enhanced header hide/show on scroll with improved animation
    const header = document.getElementById('fade-header');
    let lastScrollTop = 0;
    let scrollDirection = 'up';
    let ticking = false;
    let scrollThreshold = 10; // Minimum scroll before hiding header
    let scrollTimer = null;

    function handleHeaderVisibility() {
      // Get current scroll position from all possible sources
      const scrollTop = window.scrollY || window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;

      // Determine scroll direction with improved threshold
      if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
        scrollDirection = 'down';
      } else if (scrollTop < lastScrollTop) {
        scrollDirection = 'up';
      }

      // Hide header when scrolling down, show when scrolling up
      if (scrollDirection === 'down') {
        header.classList.add('faded');

        // Adjust main content padding when header is hidden
        if (window.innerWidth <= 480) {
          document.querySelector('main').style.paddingTop = '0';
        }
      } else {
        header.classList.remove('faded');

        // Restore main content padding when header is visible
        if (window.innerWidth <= 480) {
          document.querySelector('main').style.paddingTop = '0';
          document.querySelector('main').style.marginTop = '80px';
        }
      }

      lastScrollTop = scrollTop;
      ticking = false;
    }

    // Throttle scroll events for better performance
    function requestHeaderUpdate() {
      if (!ticking) {
        requestAnimationFrame(handleHeaderVisibility);
        ticking = true;
      }

      // Clear any existing timer
      if (scrollTimer) {
        clearTimeout(scrollTimer);
      }

      // Set a timer to show the header after scrolling stops
      scrollTimer = setTimeout(() => {
        if (window.scrollY < 10) {
          header.classList.remove('faded');
        }
      }, 1500);
    }

    // Add multiple event listeners for maximum compatibility
    ['scroll', 'touchmove', 'touchstart', 'touchend'].forEach(eventType => {
      window.addEventListener(eventType, requestHeaderUpdate, { passive: true });
    });

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      createParticles();

      // Immediately reveal all elements
      revealOnScroll();

      // Add floating animation to the newsletter section immediately
      newsletterSection.style.animation = 'float 6s infinite ease-in-out, gradientBG 15s ease infinite';

      // Force header visibility on page load
      header.classList.remove('faded');

      // Ensure content is properly positioned on page load
      if (window.innerWidth <= 480) {
        document.querySelector('main').style.marginTop = '80px';
      }

      // Check header visibility on page load
      handleHeaderVisibility();
    });
  </script>
</body>
</html>
